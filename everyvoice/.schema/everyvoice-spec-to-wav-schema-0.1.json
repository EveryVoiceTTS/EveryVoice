{
  "$defs": {
    "AdamOptimizer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "learning_rate": {
          "default": 0.0001,
          "title": "Learning Rate",
          "type": "number"
        },
        "eps": {
          "default": 1e-08,
          "title": "Eps",
          "type": "number"
        },
        "weight_decay": {
          "default": 0.01,
          "title": "Weight Decay",
          "type": "number"
        },
        "betas": {
          "default": [
            0.9,
            0.98
          ],
          "maxItems": 2,
          "minItems": 2,
          "prefixItems": [
            {
              "type": "number"
            },
            {
              "type": "number"
            }
          ],
          "title": "Betas",
          "type": "array"
        },
        "name": {
          "default": "adam",
          "title": "Name",
          "type": "string"
        }
      },
      "title": "AdamOptimizer",
      "type": "object"
    },
    "AdamWOptimizer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "learning_rate": {
          "default": 0.0001,
          "title": "Learning Rate",
          "type": "number"
        },
        "eps": {
          "default": 1e-08,
          "title": "Eps",
          "type": "number"
        },
        "weight_decay": {
          "default": 0.01,
          "title": "Weight Decay",
          "type": "number"
        },
        "betas": {
          "default": [
            0.9,
            0.98
          ],
          "maxItems": 2,
          "minItems": 2,
          "prefixItems": [
            {
              "type": "number"
            },
            {
              "type": "number"
            }
          ],
          "title": "Betas",
          "type": "array"
        },
        "name": {
          "default": "adamw",
          "title": "Name",
          "type": "string"
        }
      },
      "title": "AdamWOptimizer",
      "type": "object"
    },
    "AudioConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "min_audio_length": {
          "default": 0.4,
          "description": "The minimum length of an audio sample in seconds. Audio shorter than this will be ignored during preprocessing.",
          "title": "Min Audio Length",
          "type": "number"
        },
        "max_audio_length": {
          "default": 11.0,
          "description": "The maximum length of an audio sample in seconds. Audio longer than this will be ignored during preprocessing.",
          "title": "Max Audio Length",
          "type": "number"
        },
        "max_wav_value": {
          "default": 32767.0,
          "description": "Advanced. The maximum value allowed to be in your wav files. For 16-bit audio, this should be (2**16)/2 - 1.",
          "title": "Max Wav Value",
          "type": "number"
        },
        "input_sampling_rate": {
          "default": 22050,
          "description": "The sampling rate describes the number of samples per second of audio. The 'input_sampling_rate' is with respect to your vocoder, or spec-to-wav model. This means that the spectrograms predicted by your text-to-spec model will also be calculated from audio at this sampling rate. If you change this value, your audio will automatically be re-sampled during preprocessing.",
          "title": "Input Sampling Rate",
          "type": "integer"
        },
        "output_sampling_rate": {
          "default": 22050,
          "description": "Advanced. The sampling rate describes the number of samples per second of audio. The 'output_sampling_rate' is with respect to your vocoder, or spec-to-wav model. This means that the wav files generated by your vocoder or spec-to-wav model will be at this sampling rate. If you change this value, you will also need to change the upsample rates in your vocoder. Your audio will automatically be re-sampled during preprocessing.",
          "title": "Output Sampling Rate",
          "type": "integer"
        },
        "alignment_sampling_rate": {
          "default": 22050,
          "description": "Advanced. The sampling rate describes the number of samples per second of audio. The 'alignment_sampling_rate' describes the sampling rate used when training an alignment model. If you change this value, your audio will automatically be re-sampled during preprocessing.",
          "title": "Alignment Sampling Rate",
          "type": "integer"
        },
        "target_bit_depth": {
          "default": 16,
          "description": "Advanced. This is the bit depth of each sample in your audio files.",
          "title": "Target Bit Depth",
          "type": "integer"
        },
        "n_fft": {
          "default": 1024,
          "description": "Advanced. This is the size of the FFT.",
          "title": "FFT Size",
          "type": "integer"
        },
        "fft_window_size": {
          "default": 1024,
          "description": "Advanced. This is the window size of the FFT.",
          "title": "FFT Window Size",
          "type": "integer"
        },
        "fft_hop_size": {
          "default": 256,
          "description": "Advanced. This is the hop size for calculating the Short-Time Fourier Transform which calculates a sequence of spectrograms from a single audio file. Another way of putting it is that the hop size is equal to the amount of non-intersecting samples from the audio in each spectrogram.",
          "title": "FFT Hop Size",
          "type": "integer"
        },
        "f_min": {
          "default": 0,
          "description": "Advanced. This is the minimum frequency for the lowest frequency bin when calculating the spectrogram.",
          "title": "Minimum Frequency",
          "type": "integer"
        },
        "f_max": {
          "default": 8000,
          "description": "Advanced. This is the maximum frequency for the highest frequency bin when calculating the spectrogram.",
          "title": "Maximum Frequency",
          "type": "integer"
        },
        "n_mels": {
          "default": 80,
          "description": "Advanced. This is the number of filters in the Mel-scale spaced filterbank.",
          "title": "Number of Mel bins",
          "type": "integer"
        },
        "spec_type": {
          "anyOf": [
            {
              "$ref": "#/$defs/AudioSpecTypeEnum"
            },
            {
              "type": "string"
            }
          ],
          "default": "mel-librosa",
          "description": "Advanced. Defines how to calculate the spectrogram. 'mel' uses the TorchAudio implementation for a Mel spectrogram. 'mel-librosa' use's Librosa's implementation. 'linear' calculates a non-Mel linear spectrogram and 'raw' calculates a complex-valued spectrogram.",
          "title": "Spec Type"
        },
        "vocoder_segment_size": {
          "default": 8192,
          "description": "Advanced. The vocoder, or spec-to-wav model is trained by sampling random fixed-size sections of the audio. This value specifies the number of samples in those sections.",
          "title": "Vocoder Segment Size",
          "type": "integer"
        }
      },
      "title": "AudioConfig",
      "type": "object"
    },
    "AudioSpecTypeEnum": {
      "enum": [
        "mel",
        "mel-librosa",
        "linear",
        "raw"
      ],
      "title": "AudioSpecTypeEnum",
      "type": "string"
    },
    "Dataset": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "label": {
          "default": "YourDataSet",
          "description": "The name of your dataset",
          "title": "Label",
          "type": "string"
        },
        "data_dir": {
          "default": "/please/create/a/path/to/your/dataset/data",
          "description": "The path to the directory with your audio files.",
          "format": "path",
          "title": "Data Dir",
          "type": "string"
        },
        "filelist": {
          "default": "/please/create/a/path/to/your/dataset/filelist",
          "description": "The path to your dataset's filelist.",
          "format": "path",
          "title": "Filelist",
          "type": "string"
        },
        "filelist_loader": {
          "description": "Advanced. The file-loader function to use to load your dataset's filelist.",
          "title": "Filelist Loader",
          "type": "string"
        },
        "sox_effects": {
          "default": [
            [
              "channels",
              "1"
            ]
          ],
          "description": "Advanced. A list of SoX effects to apply to your audio prior to preprocessing. Run torchaudio.sox_effects.effect_names() in a Python interpreter to see a list of supported effects.",
          "items": {},
          "title": "Sox Effects",
          "type": "array"
        }
      },
      "title": "Dataset",
      "type": "object"
    },
    "HiFiGANDepthwiseBlocks": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "description": "Only currently implemented for the generator",
      "properties": {
        "generator": {
          "default": false,
          "title": "Generator",
          "type": "boolean"
        }
      },
      "title": "HiFiGANDepthwiseBlocks",
      "type": "object"
    },
    "HiFiGANFreezingLayers": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "all_layers": {
          "default": false,
          "title": "All Layers",
          "type": "boolean"
        },
        "msd": {
          "default": false,
          "title": "Msd",
          "type": "boolean"
        },
        "mpd": {
          "default": false,
          "title": "Mpd",
          "type": "boolean"
        },
        "generator": {
          "default": false,
          "title": "Generator",
          "type": "boolean"
        }
      },
      "title": "HiFiGANFreezingLayers",
      "type": "object"
    },
    "HiFiGANModelConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "resblock": {
          "allOf": [
            {
              "$ref": "#/$defs/HiFiGANResblock"
            }
          ],
          "default": "1"
        },
        "upsample_rates": {
          "default": [
            8,
            8
          ],
          "items": {
            "type": "integer"
          },
          "title": "Upsample Rates",
          "type": "array"
        },
        "upsample_kernel_sizes": {
          "default": [
            16,
            16
          ],
          "items": {
            "type": "integer"
          },
          "title": "Upsample Kernel Sizes",
          "type": "array"
        },
        "upsample_initial_channel": {
          "default": 512,
          "title": "Upsample Initial Channel",
          "type": "integer"
        },
        "resblock_kernel_sizes": {
          "default": [
            3,
            7,
            11
          ],
          "items": {
            "type": "integer"
          },
          "title": "Resblock Kernel Sizes",
          "type": "array"
        },
        "resblock_dilation_sizes": {
          "default": [
            [
              1,
              3,
              5
            ],
            [
              1,
              3,
              5
            ],
            [
              1,
              3,
              5
            ]
          ],
          "items": {
            "items": {
              "type": "integer"
            },
            "type": "array"
          },
          "title": "Resblock Dilation Sizes",
          "type": "array"
        },
        "depthwise_separable_convolutions": {
          "$ref": "#/$defs/HiFiGANDepthwiseBlocks"
        },
        "activation_function": {
          "title": "Activation Function",
          "type": "string"
        },
        "istft_layer": {
          "default": true,
          "title": "Istft Layer",
          "type": "boolean"
        },
        "msd_layers": {
          "default": 3,
          "title": "Msd Layers",
          "type": "integer"
        },
        "mpd_layers": {
          "default": [
            2,
            3,
            5,
            7,
            11
          ],
          "items": {
            "type": "integer"
          },
          "title": "Mpd Layers",
          "type": "array"
        }
      },
      "title": "HiFiGANModelConfig",
      "type": "object"
    },
    "HiFiGANResblock": {
      "enum": [
        "1",
        "2"
      ],
      "title": "HiFiGANResblock",
      "type": "string"
    },
    "HiFiGANTrainTypes": {
      "enum": [
        "original",
        "wgan",
        "wgan-gp"
      ],
      "title": "HiFiGANTrainTypes",
      "type": "string"
    },
    "HiFiGANTrainingConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "batch_size": {
          "default": 16,
          "description": "The number of samples to include in each batch when training. If you are running out of memory, consider lowering your batch_size.",
          "title": "Batch Size",
          "type": "integer"
        },
        "save_top_k_ckpts": {
          "default": 5,
          "description": "The number of checkpoints to save.",
          "title": "Save Top K Ckpts",
          "type": "integer"
        },
        "ckpt_steps": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The interval (in steps) for saving a checkpoint. By default checkpoints are saved every epoch using the 'ckpt_epochs' hyperparameter",
          "title": "Ckpt Steps"
        },
        "ckpt_epochs": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": 1,
          "description": "The interval (in epochs) for saving a checkpoint. You can also save checkpoints after n steps by using 'ckpt_steps'",
          "title": "Ckpt Epochs"
        },
        "max_epochs": {
          "default": 1000,
          "description": "Stop training after this many epochs",
          "title": "Max Epochs",
          "type": "integer"
        },
        "max_steps": {
          "default": 100000,
          "description": "Stop training after this many steps",
          "title": "Max Steps",
          "type": "integer"
        },
        "finetune_checkpoint": {
          "anyOf": [
            {
              "format": "path",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Automatically resume training from a checkpoint loaded from this path.",
          "title": "Finetune Checkpoint"
        },
        "training_filelist": {
          "default": "path/to/your/preprocessed/training_filelist.psv",
          "description": "The path to a filelist containing samples belonging to your training set.",
          "format": "path",
          "title": "Training Filelist",
          "type": "string"
        },
        "validation_filelist": {
          "default": "path/to/your/preprocessed/validation_filelist.psv",
          "description": "The path to a filelist containing samples belonging to your validation set.",
          "format": "path",
          "title": "Validation Filelist",
          "type": "string"
        },
        "filelist_loader": {
          "title": "Filelist Loader",
          "type": "string"
        },
        "logger": {
          "$ref": "#/$defs/LoggerConfig"
        },
        "val_data_workers": {
          "default": 0,
          "description": "The number of CPU workers to use when loading data during validation.",
          "title": "Val Data Workers",
          "type": "integer"
        },
        "train_data_workers": {
          "default": 4,
          "description": "The number of CPU workers to use when loading data during training.",
          "title": "Train Data Workers",
          "type": "integer"
        },
        "generator_warmup_steps": {
          "default": 0,
          "title": "Generator Warmup Steps",
          "type": "integer"
        },
        "gan_type": {
          "allOf": [
            {
              "$ref": "#/$defs/HiFiGANTrainTypes"
            }
          ],
          "default": "original"
        },
        "optimizer": {
          "anyOf": [
            {
              "$ref": "#/$defs/AdamOptimizer"
            },
            {
              "$ref": "#/$defs/AdamWOptimizer"
            },
            {
              "$ref": "#/$defs/RMSOptimizer"
            }
          ],
          "title": "Optimizer"
        },
        "wgan_clip_value": {
          "default": 0.01,
          "title": "Wgan Clip Value",
          "type": "number"
        },
        "use_weighted_sampler": {
          "default": false,
          "title": "Use Weighted Sampler",
          "type": "boolean"
        },
        "freeze_layers": {
          "$ref": "#/$defs/HiFiGANFreezingLayers"
        },
        "finetune": {
          "default": false,
          "title": "Finetune",
          "type": "boolean"
        }
      },
      "title": "HiFiGANTrainingConfig",
      "type": "object"
    },
    "LoggerConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "description": "The logger configures all the information needed for where to store your experiment's logs and checkpoints.\nThe structure of your logs will then be:\n<name> / <version> / <sub_dir>\n<sub_dir> will be generated by calling <sub_dir_callable> each time the LoggerConfig is constructed.",
      "properties": {
        "name": {
          "default": "BaseExperiment",
          "description": "The name of the experiment. The structure of your logs will be <name> / <version> / <sub_dir>.",
          "title": "Experiment Name",
          "type": "string"
        },
        "save_dir": {
          "default": "logs_and_checkpoints",
          "description": "The directory to save your checkpoints and logs to",
          "format": "directory-path",
          "title": "Save Dir",
          "type": "string"
        },
        "sub_dir_callable": {
          "description": "The function that generates a string to call your runs - by default this is a timestamp. The structure of your logs will be <name> / <version> / <sub_dir> where <sub_dir> is a timestamp.",
          "title": "Sub Dir Callable",
          "type": "string"
        },
        "version": {
          "default": "base",
          "description": "The version of your experiment. The structure of your logs will be <name> / <version> / <sub_dir>.",
          "title": "Version",
          "type": "string"
        }
      },
      "title": "LoggerConfig",
      "type": "object"
    },
    "PitchCalculationMethod": {
      "enum": [
        "pyworld",
        "cwt"
      ],
      "title": "PitchCalculationMethod",
      "type": "string"
    },
    "PreprocessingConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "dataset": {
          "default": "YourDataSet",
          "title": "Dataset",
          "type": "string"
        },
        "pitch_type": {
          "anyOf": [
            {
              "$ref": "#/$defs/PitchCalculationMethod"
            },
            {
              "type": "string"
            }
          ],
          "default": "pyworld",
          "title": "Pitch Type"
        },
        "pitch_phone_averaging": {
          "default": true,
          "title": "Pitch Phone Averaging",
          "type": "boolean"
        },
        "energy_phone_averaging": {
          "default": true,
          "title": "Energy Phone Averaging",
          "type": "boolean"
        },
        "value_separator": {
          "default": "--",
          "title": "Value Separator",
          "type": "string"
        },
        "train_split": {
          "default": 0.9,
          "max": 1.0,
          "min": 0.0,
          "title": "Train Split",
          "type": "number"
        },
        "dataset_split_seed": {
          "default": 1234,
          "title": "Dataset Split Seed",
          "type": "integer"
        },
        "save_dir": {
          "default": "preprocessed/YourDataSet",
          "format": "path",
          "title": "Save Dir",
          "type": "string"
        },
        "audio": {
          "$ref": "#/$defs/AudioConfig"
        },
        "path_to_audio_config_file": {
          "anyOf": [
            {
              "format": "file-path",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Path To Audio Config File"
        },
        "source_data": {
          "items": {
            "$ref": "#/$defs/Dataset"
          },
          "title": "Source Data",
          "type": "array"
        }
      },
      "title": "PreprocessingConfig",
      "type": "object"
    },
    "RMSOptimizer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "additionalProperties": false,
      "properties": {
        "learning_rate": {
          "default": 0.0001,
          "title": "Learning Rate",
          "type": "number"
        },
        "eps": {
          "default": 1e-08,
          "title": "Eps",
          "type": "number"
        },
        "weight_decay": {
          "default": 0.01,
          "title": "Weight Decay",
          "type": "number"
        },
        "alpha": {
          "default": 0.99,
          "title": "Alpha",
          "type": "number"
        },
        "name": {
          "default": "rms",
          "title": "Name",
          "type": "string"
        }
      },
      "title": "RMSOptimizer",
      "type": "object"
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "properties": {
    "model": {
      "$ref": "#/$defs/HiFiGANModelConfig"
    },
    "path_to_model_config_file": {
      "anyOf": [
        {
          "format": "file-path",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Path To Model Config File"
    },
    "training": {
      "$ref": "#/$defs/HiFiGANTrainingConfig"
    },
    "path_to_training_config_file": {
      "anyOf": [
        {
          "format": "file-path",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Path To Training Config File"
    },
    "preprocessing": {
      "$ref": "#/$defs/PreprocessingConfig"
    },
    "path_to_preprocessing_config_file": {
      "anyOf": [
        {
          "format": "file-path",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Path To Preprocessing Config File"
    }
  },
  "title": "HiFiGANConfig",
  "type": "object"
}
